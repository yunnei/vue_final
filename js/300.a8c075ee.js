"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[300],{1630:function(s,e,t){t.d(e,{Z:function(){return _}});var a=t(6252),l=t(71);const r={class:"loading-bg"},d=(0,a._)("div",{class:"loading"},[(0,a._)("img",{src:l,alt:"shaved-ice"}),(0,a._)("span"),(0,a._)("span"),(0,a._)("span"),(0,a._)("span")],-1),c=[d];function n(s,e){return(0,a.wg)(),(0,a.iD)("div",r,c)}var i=t(3744);const o={},p=(0,i.Z)(o,[["render",n]]);var _=p},9300:function(s,e,t){t.r(e),t.d(e,{default:function(){return ms}});var a=t(6252),l=t(3577);const r={class:"container"},d={class:"d-flex flex-column align-items-center"},c={class:"d-flex justify-content-center text-center pt-4"},n=(0,a._)("div",{class:"step-1 d-flex flex-column align-items-center p-4"},[(0,a._)("div",{class:"step-num bg-dark text-white border border-dark border-3"}," 1 "),(0,a._)("p",{class:"text-muted mt-2"},"建立訂單")],-1),i=(0,a._)("p",{class:"text-muted mt-2"},"確認結帳",-1),o={class:"d-flex flex-column align-items-center p-4"},p=(0,a._)("p",{class:"text-muted mt-2"},"完成訂單",-1),_={key:0,class:"bg-light text-center w-75 py-4"},u=(0,a._)("p",{class:"fs-4 mb-1"},[(0,a._)("i",{class:"bi bi-check-all"}),(0,a.Uk)(" 交易成功")],-1),m=(0,a._)("p",null,"非常感謝您的支持！",-1),b=[u,m],w={class:"row"},g={class:"col-md-8 mt-4"},h={class:"p-4"},f=(0,a._)("h2",{class:"fs-4 mb-4"},"訂購內容",-1),v={class:"table align-middle"},x=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"商品內容"),(0,a._)("th",{class:"d-none d-md-table-cell text-end",width:"20%"}," 單價 "),(0,a._)("th",{class:"d-none d-md-table-cell text-center",width:"20%"}," 數量 "),(0,a._)("th",{class:"d-none d-md-table-cell text-end",width:"20%"}," 金額 ")])],-1),y={class:"d-flex align-items-center"},k=["src","alt"],z={class:"ms-3"},D={class:"mb-2"},$={class:"d-md-none"},U={class:"mb-2 fw-bold"},L={class:"text-start",type:"number"},C={class:"d-none d-md-table-cell text-end"},I={class:"d-none d-md-table-cell text-center"},O={class:"text-center",type:"number"},S={class:"d-none d-md-table-cell text-end"},Z={class:"fs-5 fw-bold text-end"},q={class:"col-md-4 p-4 bg-secondary my-4"},M=(0,a._)("h2",{class:"fs-4 mb-3"},"訂單資訊",-1),H={class:"list-unstyled mb-4"},W={class:"row mb-1"},Y=(0,a._)("span",{class:"col-4"},"訂購時間：",-1),j={class:"row mb-1"},E=(0,a._)("span",{class:"col-4"},"訂單編號：",-1),K={class:"row d-flex mb-1 align-items-center"},A=(0,a._)("span",{class:"col-4"},"付款狀態：",-1),B={key:0,class:"col p-0 text-success fw-bold fs-5"},F={key:1,class:"col p-0 text-danger fw-bold fs-5"},G={class:"list-unstyled mb-4"},J=(0,a._)("h2",{class:"fs-4 mb-3"},"收件人資料",-1),N={class:"row mb-1"},P=(0,a._)("span",{class:"col-4"},"姓名：",-1),Q={class:"row mb-1"},R=(0,a._)("span",{class:"col-4"},"Email：",-1),T={class:"row mb-1"},V=(0,a._)("span",{class:"col-4"},"電話：",-1),X={class:"row mb-1"},ss=(0,a._)("span",{class:"col-4"},"地址：",-1),es={class:"row"},ts=(0,a._)("span",{class:"col-4"},"留言：",-1),as={key:0,class:"col p-0"},ls={key:1,class:"col p-0"},rs={key:1,class:"d-flex"},ds=(0,a._)("a",{class:"btn btn-outline-dark w-100 me-2",type:"button",href:"#/menu"},[(0,a._)("i",{class:"bi bi-arrow-left"}),(0,a.Uk)(" 查看菜單 ")],-1),cs=(0,a._)("a",{class:"btn btn-dark w-100 ms-2",type:"button",href:"#/products"},[(0,a.Uk)(" 繼續選購 "),(0,a._)("i",{class:"bi bi-arrow-right"})],-1),ns=[ds,cs];function is(s,e,t,u,m,ds){const cs=(0,a.up)("Loader"),is=(0,a.up)("Loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(is,{active:m.isLoading,opacity:.8,"z-index":1e3},{default:(0,a.w5)((()=>[(0,a.Wm)(cs)])),_:1},8,["active","opacity"]),(0,a._)("div",r,[(0,a._)("div",d,[(0,a._)("div",c,[n,(0,a._)("div",{class:(0,l.C_)(["d-flex flex-column align-items-center p-4",m.order.is_paid?"step-1":"step-2"])},[(0,a._)("div",{class:(0,l.C_)(["step-num bg-dark text-white border border-3",m.order.is_paid?"border-dark":"border-secondary"])}," 2 ",2),i],2),(0,a._)("div",o,[(0,a._)("div",{class:(0,l.C_)(["step-num bg-secondary border border-secondary border-3",m.order.is_paid?"bg-dark text-white":"bg-secondary text-dark"])}," 3 ",2),p])]),m.order.is_paid?((0,a.wg)(),(0,a.iD)("div",_,b)):(0,a.kq)("",!0)]),(0,a._)("div",w,[(0,a._)("div",g,[(0,a._)("div",h,[f,(0,a._)("table",v,[x,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.order.products,(s=>((0,a.wg)(),(0,a.iD)("tr",{key:s.id},[(0,a._)("td",y,[(0,a._)("img",{src:s.product.imageUrl,alt:s.product.title,class:"w-36"},null,8,k),(0,a._)("div",z,[(0,a._)("div",D,(0,l.zw)(s.product.title),1),(0,a._)("div",$,[(0,a._)("div",U,"$ "+(0,l.zw)(s.product.price),1),(0,a._)("span",L," 數量："+(0,l.zw)(s.qty),1)])])]),(0,a._)("td",C," $ "+(0,l.zw)(s.product.price),1),(0,a._)("td",I,[(0,a._)("span",O,(0,l.zw)(s.qty),1)]),(0,a._)("td",S," $ "+(0,l.zw)(s.total),1)])))),128))])]),(0,a._)("p",Z," 總金額：$ "+(0,l.zw)(parseInt(m.order.total)),1)])]),(0,a._)("div",q,[M,(0,a._)("ul",H,[(0,a._)("li",W,[Y,(0,a.Uk)(" "+(0,l.zw)(new Date(1e3*m.order.create_at).toLocaleDateString()),1)]),(0,a._)("li",j,[E,(0,a.Uk)((0,l.zw)(m.order.id),1)]),(0,a._)("li",K,[A,m.order.is_paid?((0,a.wg)(),(0,a.iD)("span",B," 已完成付款 ")):((0,a.wg)(),(0,a.iD)("span",F," 尚需付款 $ "+(0,l.zw)(parseInt(m.order.total)),1))])]),(0,a._)("ul",G,[J,(0,a._)("li",N,[P,(0,a.Uk)((0,l.zw)(m.order.user.name),1)]),(0,a._)("li",Q,[R,(0,a.Uk)((0,l.zw)(m.order.user.email),1)]),(0,a._)("li",T,[V,(0,a.Uk)((0,l.zw)(m.order.user.tel),1)]),(0,a._)("li",X,[ss,(0,a.Uk)((0,l.zw)(m.order.user.address),1)]),(0,a._)("li",es,[ts,m.order.message?((0,a.wg)(),(0,a.iD)("span",as,(0,l.zw)(m.order.message),1)):((0,a.wg)(),(0,a.iD)("span",ls,"無"))])]),m.order.is_paid?((0,a.wg)(),(0,a.iD)("div",rs,ns)):((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-dark w-100",type:"button",onClick:e[0]||(e[0]=(...s)=>ds.payOrder&&ds.payOrder(...s))}," 馬上付款 "))])])])],64)}var os=t(1630),ps={components:{Loader:os.Z},data(){return{order:{user:{}},orderId:{},isLoading:!0}},methods:{getOrder(){const s=`https://vue3-course-api.hexschool.io/v2/api/yunei/order/${this.orderId}`;this.isLoading=!0,this.$http.get(s).then((s=>{this.isLoading=!1,this.order=s.data.order})).catch((s=>{this.$httpMessageState(s.response,s.response.data.message)}))},payOrder(){const s=`https://vue3-course-api.hexschool.io/v2/api/yunei/pay/${this.orderId}`;this.$http.post(s).then((s=>{this.$httpMessageState(s,"付款"),this.getOrder()})).catch((s=>{this.$httpMessageState(s.response,s.response.data.message)}))}},mounted(){this.orderId=this.$route.params.id,this.getOrder()}},_s=t(3744);const us=(0,_s.Z)(ps,[["render",is]]);var ms=us},71:function(s,e,t){s.exports=t.p+"img/daoru-logo02.79d17a46.png"}}]);
//# sourceMappingURL=300.a8c075ee.js.map