{"version":3,"file":"js/888.798ddbb4.js","mappings":"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","sources":["webpack://vue_final/./src/views/dashboard/AdminArticles.vue","webpack://vue_final/./src/components/ArticleModal.vue","webpack://vue_final/./src/components/ArticleModal.vue?63dd","webpack://vue_final/./src/views/dashboard/AdminArticles.vue?90bb"],"sourcesContent":["<template>\n  <div class=\"container py-4\">\n    <h2>貼文</h2>\n    <div class=\"text-end\">\n      <button class=\"btn btn-primary\" type=\"button\" @click=\"openModal('new')\">\n        + 新增貼文\n      </button>\n    </div>\n    <div class=\"row row-cols-3 g-2 my-3\">\n      <div v-for=\"article in articles\" :key=\"article.id\" class=\"col\">\n        <div class=\"card p-0 h-100\">\n          <div class=\"card-body d-flex flex-column justify-content-between\">\n            <div class=\"mb-4\">\n              <div\n                class=\"d-flex justify-content-between align-items-center mb-1\"\n              >\n                <h5 class=\"card-title fw-bold\">{{ article.title }}</h5>\n                <span class=\"fs-6 fw-normal text-muted\">\n                  {{ new Date(article.create_at * 1000).toLocaleDateString() }}\n                </span>\n              </div>\n              <p class=\"card-text card-truncate\">\n                {{ article.description }}\n              </p>\n            </div>\n            <div class=\"d-flex justify-content-between align-items-end\">\n              <div>\n                <span class=\"text-success fw-bold\" v-if=\"article.isPublic\">\n                  已發布<i class=\"bi bi-check\"></i>\n                </span>\n                <span class=\"text-muted\" v-else>未發布</span>\n              </div>\n              <div>\n                <button\n                  class=\"btn btn-primary me-1\"\n                  type=\"button\"\n                  @click=\"getArticle(article.id)\"\n                >\n                  編輯\n                </button>\n                <button\n                  class=\"btn btn-outline-danger\"\n                  type=\"button\"\n                  @click=\"openModal('del', article)\"\n                >\n                  刪除\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <Pagination :pagination=\"pagination\" @get-data=\"getArticles\" />\n    <ArticleModal\n      :article=\"articleTemp\"\n      :is-new=\"isNew\"\n      @update-article=\"updateArticle\"\n      ref=\"articleModal\"\n    />\n    <DelModal\n      ref=\"delModal\"\n      :item=\"articleTemp\"\n      @del-item=\"delArticle(articleTemp)\"\n    />\n  </div>\n</template>\n\n<script>\nimport Modal from \"bootstrap/js/dist/modal\";\nimport DelModal from \"@/components/DelModal.vue\";\nimport Pagination from \"@/components/PaginationComponent.vue\";\nimport ArticleModal from \"@/components/ArticleModal.vue\";\n\nexport default {\n  components: {\n    DelModal,\n    Pagination,\n    ArticleModal,\n  },\n  data() {\n    return {\n      articles: [],\n      pagination: {},\n      isNew: false,\n      articleTemp: {\n        tag: [],\n      },\n      create_date: \"\",\n      articleModal: {},\n      delModal: {},\n    };\n  },\n  methods: {\n    openModal(status, article) {\n      if (status === \"new\") {\n        this.isNew = true;\n        this.articleTemp = {\n          create_at: new Date().getTime() / 1000,\n          isPublic: false,\n          tag: [],\n        };\n        this.articleModal.show();\n      } else if (status === \"edit\") {\n        this.isNew = false;\n        this.articleTemp = { ...article };\n        this.articleModal.show();\n      } else if (status === \"del\") {\n        this.articleTemp = { ...article };\n        this.delModal.show();\n      }\n    },\n    getArticles(page = 1) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/articles?page=${page}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.articles = res.data.articles;\n          this.pagination = res.data.pagination;\n        })\n        .catch((error) => {\n          this.$httpMessageState(error.response, error.response.data.message);\n        });\n    },\n    getArticle(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article/${id}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.openModal(\"edit\", res.data.article);\n        })\n        .catch((error) => {\n          this.$httpMessageState(error.response, error.response.data.message);\n        });\n    },\n    updateArticle() {\n      let url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article/${this.articleTemp.id}`;\n      let http = \"put\";\n      let msg = `新增 ${this.articleTemp.title}`;\n      if (this.isNew) {\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article`;\n        http = \"post\";\n        msg = `更新 ${this.articleTemp.title}`;\n      }\n      const data = { data: this.articleTemp };\n      this.$http[http](url, data)\n        .then((res) => {\n          this.$httpMessageState(res, msg);\n          this.getArticles();\n          this.articleModal.hide();\n        })\n        .catch((error) => {\n          this.$httpMessageState(error.response, error.response.data.message);\n        });\n    },\n    delArticle(article) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article/${article.id}`;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          this.$httpMessageState(res, `刪除 ${this.articleTemp.title}`);\n          this.getArticles(this.pagination.current_page);\n          this.delModal.hide();\n        })\n        .catch((error) => {\n          this.$httpMessageState(error.response, error.response.data.message);\n        });\n    },\n  },\n  mounted() {\n    this.articleModal = new Modal(this.$refs.articleModal.modal);\n    this.delModal = new Modal(this.$refs.delModal.modal);\n    this.getArticles();\n  },\n};\n</script>\n\n<style>\n.card-truncate {\n  -webkit-box-orient: vertical;\n  display: -webkit-box;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 4;\n}\n</style>\n","<template>\n  <div class=\"modal fade\" tabindex=\"-1\" ref=\"modal\">\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-dark\">\n          <h5 class=\"modal-title text-white\">\n            <span v-if=\"isNew\">新增貼文</span>\n            <span v-else>編輯貼文</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-4\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label fs-5\">標題</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"title\"\n                  placeholder=\"請輸入貼文標題\"\n                  v-model=\"articleTemp.title\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label fs-5\">封面圖片</label>\n                <div class=\"input-group mb-3\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"image\"\n                    placeholder=\"請輸入圖片網址\"\n                    v-model=\"articleTemp.image\"\n                  />\n                  <button\n                    class=\"btn btn-outline-danger\"\n                    type=\"button\"\n                    id=\"image\"\n                    @click=\"articleTemp.image = ''\"\n                  >\n                    刪除\n                  </button>\n                </div>\n                <input\n                  v-if=\"!articleTemp.image\"\n                  class=\"form-control\"\n                  type=\"file\"\n                  ref=\"imageFile\"\n                  @change=\"uploadImage\"\n                />\n                <img\n                  v-if=\"articleTemp.image\"\n                  class=\"mt-4 img-fluid\"\n                  :src=\"articleTemp.image\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"autohr\" class=\"form-label fs-5\">作者</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"autohr\"\n                  placeholder=\"請輸入作者名稱\"\n                  v-model=\"articleTemp.author\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"create_at\" class=\"form-label fs-5\">\n                  建立日期\n                </label>\n                <input\n                  type=\"date\"\n                  class=\"form-control\"\n                  id=\"create_at\"\n                  v-model=\"create_date\"\n                />\n              </div>\n            </div>\n            <div class=\"col-8\">\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label fs-5\">描述</label>\n                <textarea\n                  class=\"form-control\"\n                  id=\"description\"\n                  rows=\"3\"\n                  v-model=\"articleTemp.description\"\n                ></textarea>\n              </div>\n              <div class=\"mb-3\">\n                <p class=\"form-label fs-5\">內文</p>\n                <ckeditor\n                  :editor=\"editor\"\n                  :config=\"editorConfig\"\n                  v-model=\"articleTemp.content\"\n                ></ckeditor>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label fs-5\">標籤</label>\n                <div class=\"mb-2 fs-5\">\n                  <span\n                    v-for=\"(tag, i) in articleTemp.tag\"\n                    :key=\"i\"\n                    class=\"badge bg-secondary text-dark me-1\"\n                  >\n                    {{ tag }}\n                    <a href=\"#\" @click.prevent=\"articleTemp.tag.splice(i, 1)\">\n                      x\n                    </a>\n                  </span>\n                </div>\n                <div class=\"input-group input-group-sm mb-3 w-50\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入標籤\"\n                    ref=\"newTag\"\n                  />\n                  <button\n                    class=\"btn btn-outline-dark\"\n                    type=\"button\"\n                    @click=\"addTag\"\n                  >\n                    新增\n                  </button>\n                </div>\n              </div>\n              <div class=\"form-check form-switch\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  role=\"switch\"\n                  id=\"isPublic\"\n                  v-model=\"articleTemp.isPublic\"\n                  :true-value=\"true\"\n                  :false-value=\"false\"\n                />\n                <label class=\"form-check-label\" for=\"isPublic\">\n                  <span v-if=\"articleTemp.isPublic\">發布</span>\n                  <span v-else>未發布</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"updateArticle\">\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\n\nexport default {\n  props: [\"article\", \"isNew\"],\n  data() {\n    return {\n      articleTemp: {},\n      create_date: \"\",\n      modal: {},\n      editor: ClassicEditor,\n      editorConfig: {\n        toolbar: [\n          \"heading\",\n          \"bold\",\n          \"italic\",\n          \"link\",\n          \"|\",\n          \"numberedList\",\n          \"bulletedList\",\n          \"|\",\n        ],\n      },\n    };\n  },\n  watch: {\n    article() {\n      this.articleTemp = this.article;\n      this.create_date = new Date(this.articleTemp.create_at * 1000)\n        .toISOString()\n        .split(\"T\")[0];\n    },\n    create_date() {\n      this.articleTemp.create_at = new Date(this.create_date).getTime() / 1000;\n    },\n  },\n  methods: {\n    updateArticle() {\n      this.$emit(\"update-article\", this.articleTemp);\n    },\n    addTag() {\n      if (this.articleTemp.tag) {\n        this.articleTemp.tag.push(this.$refs.newTag.value);\n      } else {\n        this.articleTemp.tag = [`${this.$refs.newTag.value}`];\n      }\n      this.$refs.newTag.value = \"\";\n    },\n    uploadImage() {\n      const file = this.$refs.imageFile.files[0];\n      const formData = new FormData();\n      formData.append(\"file-to-upload\", file);\n\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http\n        .post(url, formData)\n        .then((res) => {\n          this.articleTemp.image = res.data.imageUrl;\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n        });\n    },\n  },\n  mounted() {\n    this.modal = this.$refs.modal;\n  },\n};\n</script>\n","import { render } from \"./ArticleModal.vue?vue&type=template&id=46255bc0\"\nimport script from \"./ArticleModal.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\OneDrive\\\\桌面\\\\vue_final\\\\vue_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./AdminArticles.vue?vue&type=template&id=4f509a35\"\nimport script from \"./AdminArticles.vue?vue&type=script&lang=js\"\nexport * from \"./AdminArticles.vue?vue&type=script&lang=js\"\n\nimport \"./AdminArticles.vue?vue&type=style&index=0&id=4f509a35&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\OneDrive\\\\桌面\\\\vue_final\\\\vue_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_15","_createElementBlock","_hoisted_2","type","onClick","$options","_Fragment","_renderList","$data","article","key","id","_toDisplayString","title","Date","create_at","toLocaleDateString","description","isPublic","_hoisted_16","_hoisted_18","_hoisted_19","_createVNode","_component_Pagination","pagination","onGetData","_component_ArticleModal","onUpdateArticle","ref","_component_DelModal","item","onDelItem","tabindex","for","placeholder","$props","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_13","$event","image","onChange","src","author","_hoisted_21","_hoisted_24","rows","_hoisted_26","_component_ckeditor","editor","config","content","_hoisted_28","tag","i","href","splice","_hoisted_30","role","_hoisted_35","_hoisted_36","_hoisted_38","props","data","articleTemp","create_date","modal","ClassicEditor","editorConfig","toolbar","watch","this","toISOString","split","getTime","methods","updateArticle","$emit","addTag","push","$refs","newTag","value","uploadImage","file","imageFile","files","formData","FormData","append","url","$http","post","then","res","imageUrl","catch","error","console","log","response","mounted","__exports__","components","DelModal","Pagination","ArticleModal","articles","isNew","articleModal","delModal","openModal","status","show","getArticles","page","get","$httpMessageState","message","getArticle","http","msg","hide","delArticle","delete","current_page","Modal","render"],"sourceRoot":""}